Work To Do, Outstanding Items:

ccrtrtti.lib

Sam:
- New firmware for TR-DVVS (stall sensor, voice commands)
- Modify Vega/DVS to output switch logic for vario circling with
   PDA circling forced false


- Audio schemes
- Profile selector not getting in before everything is initialised!
  --> inverse infoboxes
- Auto Mc not updating when final glide forced early
  --> due to pirker function not working across more than one point to go
- Spurious airspace warning when leaving airspace
- Vario gauge needle doesn't follow bitmap exactly
- mc alt required sometimes decreases with mc, why?
  --> could be due to final glide switching if low mc in strong wind
- AAT segment line for targets bug, not always in sector, and range not
  always going to be increasing.  Need better logic here.
- Distance/bearing great circle calculations?
- Stop IGC on full disk, memory check at startup
  --> memory check at startup potentially buggy
- Spurious touchscreen detect when pressing menu buttons
- Arm advance:
    if press again after advance and still in sector,
    restart that waypoint; or if on waypoint 1, restart the task
    Also display green button with "Arm Advance" if task isn't started
- Task details dialog: start details and details on each waypoint
- Alternate start locations
- Handle 640x480 displays
- FAI 90 start/finish type

John Buchannon feedback:
 - Tie circling mode to vario
   -- Need extra flag to indicate to Vega that XCSoar is getting
      its mode from it, not the other way around?
      --> slave mode, but don't bugger wind calculations
 - Vario gauge
   -- Needle showing overshoot, needs faster animation
   -- Averager jumps around too much (update only every 2-5 seconds maybe)
   -- No need to show gross, when showing only some items, make text bigger

Ring tasman instruments guy
Send price to stu


Documentation:
- Start/Finish line: 'radius' parameter is half line width
- Explain more about task starting, valid task starts etc
- Update configuration screenshots and text
- Make sure all release note info is in the manual.
- Better description of prioritisation of messages
- Better description of speed command sounds
- Better description of auto mc
- Better description of how to add new tasks

===========
TASK SYSTEM
===========

- Task system
  - File save/load to contain all info
  - XML based task file
  - Have separate Arm modes for AAT and non-AAT modes?
  - Display start speed/altitude/time
  - Different ways of calculating average speed
  - Based on manual input or task average
  - Add 'Append' waypoint function, so users can create a task by selecting
    waypoints from the map in sequence
  - Add 'PanTo' waypoint function, to pan towards the selected waypoint
  - Task waypoint move up/down
  - Online Contest optimisation (related also to AAT optimisation)
  - (Feature request 1237800) Preserve TPs in tasks when waypoint file changed
  - Allow for alternate start points, or alternate tasks
  - FAI style start/end sectors (OO zones)
- AAT support:
  - More accurate calculation of ETA etc with respect to final glide fraction
  - Calculator, What if I leave now?
- TeamCode
  - Port teamcode to new dialog system
- (Idea) Tour mode: home waypoint entered twice in task, so allows non-final
  glide cruise around, then by advancing waypoint, it turns to final glide
  mode.
- Additional waypoint info:
  - Info from ERSA or other sources for airfields
    -- Runways (preferred runway given wind)
    -- Runway diagram?
  - Info for all waypoints
    -- Computed arrival height AGL at Mc0 Mc1 Mc2
- Task statistics
  - Need to track average speed and time spent on each leg for statistics
    review after flight.

=====================
AIRSPACE AND WARNINGS
=====================

- Airspace
  - ** (Feature request 1399775) configurable border thickness
  - Sort nearest above/below
  - Monitoring function (distance/bearing to nearest airspace or exit),
     with associated infoboxes?
- Warnings and voice prompts (issued directly and passed to Vega, gce?)
  - Final glide through terrain
  - Distance to waypoint readout
  - Passing task waypoints
  - Airspace
  - Fast descent freezing
  - Implement the Vega protocol in XCSoar
  - (Feature request 1394440) Gear warning
  - (Feature request 1233220) Sunset warning
  - Terrain out of range


==============
GLIDE COMPUTER
==============

- Wind calculations
  - Compass wind estimator
- Flight modes
  - (Feature request 1459280) user-commanded flight modes
  - Externally (vario or switch) forced climb/cruise
  - In climb stats page, show direction of circling
  - Drop marker automatically conditional on significant climb
- Pirker analysis:
  - Given a height available, what maccready gives zero arrival altitude?
  - This can be used to make automc more efficient
  - Final glide calculations to be made with respect to true airspeed,
    variation of wind with height: glide angle doesn't change, but
    speed does (and therefore time) as well as wind relative to indicated
    airspeed.  ->
      do calculations over 10 steps, optimal at each step, in terms of
      indicated airspeed, then convert to true airspeed for time and
      distance/height calculations.
- Smart mcready management
  - Scale MC value to allow for decreased thermal strength with low altitude
  - Scale MC value to allow for risk of not encountering thermal with low
    altitude (and take into account wind factor here?)
  - Calculate MC value based on average climb rate
  - Allow user to adjust optimism/pessimism
- Altitude representation
  - Flight level versus altitude in airspace warnings
  - (Feature request 1278082) Ellipsoid error correction
- Calculations for cloud streets
  - draw rough lines for streets and to indicate traversal track
- Density altitude correction factors for speeds, climb rates etc
- (Idea) Calculate/display thermal drift as % of wind speed
- Detect flying backwards in strong headwinds
  - Currently, wind calculation will fail if going backwards
  - Can detect this from rapid change in heading (approx 180 degrees)
  - If we know roughly the wind, can estimate what the glider heading is.
- Ballast
  - Allow entry of pilot weight, recalculation of ballast limits
  - Trim calculations/display

===================
MARKS AND WAYPOINTS
===================

- Marker system
   - (Feature request 1281642) Mark to waypoint, mark to waypointfile
   - (Feature request 1463308) Auto-mark thermal
   - Display of encountered thermals in map
     -- projected to location of expected arrival to compensate for wind
   - Allow users to toggle whether marked points get deleted on startup
- Thermal markers:
   - Implemented as normal markers, but with position offset to estimated
     source of thermal.
   - When rendering, estimate position of thermal at glider's height.
- Waypoints
  - (Feature request 1281639) Editing/saving waypoints
  - Generate waypoints from towns (builtupa, miscpopp)
  - Cursor keys to allow moving to next waypoints in direction of cursor.

===========================
MAP, GAUGE AND ICON DISPLAY
===========================

- Info icons/symbols
  - GPS signal strength?
  - FLARM traffic (use FLARM logo?)
- Display elements
  - Add (optional) track line particularly if not in north up mode
  - Speed to fly bars visibility in fullscreen
  - (Feature request 1281820) configurable glider icon
  - (Feature request 1444335) configurable max/min zoom
- Terrain rendering
  - (Feature request 1370830) display satellite weather imagery on map
  - Predefined brightness/contrast settings
  - Configuration of various colour ramps
  - (Idea) Draw land use with pattern, for areas of forrest or crop fields
     -- Do this with pattern brush over top of normal terrain/topo
- Gauges
  - (Bug 1459609) CDI gauge rewrite to use vector graphics
  - Vario gauge needle not visible when hitting upper limit
  - Vario gauge knots scale
  - Option for Vario gauge display mode to display netto or relative during
    cruise

=============
CONFIGURATION
=============

- Dialogs:
  - Config: vario gauge, other optional display items,
      hide vario on fullscreen
  - Config: display blanking, other missing items?
  - Configuration option for checklist and flarm filename
- Fonts
  - Adjustable font for long infoboxes (especially time)
  - (Feature request 1374130) Font customisation in settings (font type, size)

==============
USER INTERFACE
==============

- Status messages
  - Status messages now block if in dialogs, they appear on exit.
  - Colored status messages?
- Miscellaneous UI
  - (Bug 1368752) Infoboxes cropped on square displays
  - Password protect on settings
  - Implement cursor moveable by arrow keys for waypoint/airspace selection
    and to move/edit waypoints.
- Input events
  - Timed buttons (pass time of button press to processKey and support
  threshold passing in InputEvents - eg: Set long press as nnn ms -
  over that is long press, under is short) (assume for simplicity that
  we still only press single buttons at a time - thus time last
  button.
  - Consider support of double click (harder...)
- (Idea) Multiple Auxiliary infobox pages, so user can configure for each mode,
  two sets of navboxes and cycle between them?  Maybe too much.

=====================
SYSTEM/INFRASTRUCTURE
=====================

- Robustness
  - Revert to default aircraft type if polar file doesn't exist or invalid
  - Free memory check at startup, ask to delete old IGC files?
  - Log file to report errors, include file and line number
  - xmlParser unicode handling not very robust
  - SetFontInfo not reliable
  - Fix LocalPath so it is thread safe
- Miscellaneous
  - (Bug 1428871) PPC2002 installer chooses wrong CAB
  - (Bug 1366492) Logger start sensitivity
- Comms
  - Robustness for PC version, currently hanging on restart
  - Need 3 ports for full support of Altair.
  - Simple output terminal for COM ports (allow users to check serial
    connnections are working correctly).
- Battery management
  - Low battery exit is not working, fix it.
  - Improved notification of battery level - not just simulator.
    (exit should still only be the simulator)
  - Notify the user (via GCE to Input) of switching between AC and Battery mode
- Files:
  - Proper filename extensions
  - ** (Feature request 1379262) Configurable output file path
- Profiles:
  - Need profile load/save page
  - Filtering, so user can load any of:
    -- Aircraft settings
    -- Competition/task settings
    -- Locality settings (terrain, topo, airspace, waypoints)
